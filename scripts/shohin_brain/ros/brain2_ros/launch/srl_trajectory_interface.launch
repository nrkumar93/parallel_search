<launch>

  <arg name="rviz" default="true"/>

  <!--node pkg="topic_tools" type="relay" name="relay_robot_tf_to_tf" args="robot/tf tf"/-->
  <node pkg="topic_tools" type="relay" name="relay_tracker_tf_to_tf" args="tracker/tf tf"/>
  <!--node pkg="topic_tools" type="relay" name="relay_robot_joint_states" args="joint_states robot/joint_states"/-->
  <node pkg="tf" type="static_transform_publisher" name="relay_base_measured" args="0 0 0 0 0 0 base_link measured/base_link 10"/>
  <node pkg="tf" type="static_transform_publisher" name="relay_base_measured_link0" args="0 0 0 0 0 0 measured/base_link measured/panda_link0 10"/>
  <node pkg="tf" type="static_transform_publisher" name="relay_base_00" args="0 0 0 0 0 0 00_base_link base_link 10"/>
  <node pkg="tf" type="static_transform_publisher" name="relay_link0_base" args="0 0 0 0 0 0 base_link panda_link0 10"/>
  <node pkg="tf" type="static_transform_publisher" name="relay_base_odom" args="0 0 0 0 0 0 00_base_link odom_combined 10"/>

  <!-- important one: bring up the trajectory node -->
  <node pkg="brain2_ros" type="franka_trajectory_node.py" name="franka_trajectory_node" output="screen"/>

  <node name="measured_robot_state_publisher" 
      pkg="robot_state_publisher" 
      type="robot_state_publisher" 
      output="screen"
      required="true">
      <param name="tf_prefix" type="str" value="measured" />
      <param name="publish_frequency" type="double" value="50.0" />
      <!--remap from="/joint_states" to="/robot/joint_states" /-->
    </node>

  <node name="controlled_robot_state_publisher" 
      pkg="robot_state_publisher" 
      type="robot_state_publisher" 
      output="screen"
      required="true">
      <param name="publish_frequency" type="double" value="50.0" />
      <!--remap from="/joint_states" to="/robot/joint_states" /-->
  </node>

  <include if="$(arg rviz)" file="$(find brain2_ros)/launch/viz_franka_sensors.launch"/>
</launch>
